<!--
  ~ Copyright (C) 2016 HAT Data Exchange Ltd - All Rights Reserved
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  ~ Written by Augustinas Markevicius <augustinas.markevicius@hatdex.org> 2016
  -->

<mat-card class="dashboard-hero overlay">
  <mat-toolbar style="color: rgba(255, 255, 255, 0.87); background-color: transparent; position: relative;">
    <span style="flex: 1 1 auto;">Profile Photo</span>
    <span style="display: flex; align-items: center; justify-content: space-around;">
      <button mat-icon-button matTooltip="Upload new profile photo" [matTooltipPosition]="'below'"
              (click)="invokeFileUploadDialog()">
        <mat-icon>file_upload</mat-icon>
      </button>
      <button mat-icon-button matTooltip="Toggle profile photo privacy" [matTooltipPosition]="'below'"
              (click)="profile.profilePhoto.shared = !profile.profilePhoto.shared">
        <mat-icon>{{ profile.profilePhoto.shared ? 'lock_open' : 'lock_outline' }}</mat-icon>
      </button>
      <button mat-icon-button matTooltip="Save form" [matTooltipPosition]="'below'"
              (click)="submitForm()">
        <mat-icon>save</mat-icon>
      </button>
    </span>
  </mat-toolbar>

  <mat-card-content>
    <div class="phata-box phata-name" style="margin-top: 100px;">
      <div matTooltip="Upload new profile photo" [matTooltipPosition]="'above'" style="cursor: pointer;"
           (click)="invokeFileUploadDialog()">
        <svg *ngIf="!profile?.profilePhoto.value" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           width="20px" height="20px" viewBox="2 2 20 20" enable-background="new 2 2 20 20" xml:space="preserve">
          <path fill="#FFFFFF" d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10c5.52,0,10-4.48,10-10C22,6.48,17.52,2,12,2z M12,5
            c1.66,0,3,1.34,3,3s-1.34,3-3,3S9,9.66,9,8S10.34,5,12,5z M12,19.2c-2.5,0-4.71-1.28-6-3.22c0.03-1.99,4-3.08,6-3.08
            c1.99,0,5.971,1.09,6,3.08C16.71,17.92,14.5,19.2,12,19.2z"/>
          <path fill="none" d="M0,0h24v24H0V0z"/>
        </svg>

        <img *ngIf="profile?.profilePhoto.value" [src]="profile?.profilePhoto.value">
      </div>

      <h1>{{hostname}}</h1>
      <p>
        <span class="social-links">
          <a *ngIf="profile?.online.website.value" [href]="profile?.online.website.value" target="_blank"><img src="assets/icons/website-icon.svg"></a>
          <a *ngIf="profile?.online.blog.value" [href]="profile?.online.blog.value" target="_blank"><img src="assets/icons/blog-icon.svg"></a>
          <a *ngIf="profile?.online.facebook.value" [href]="profile?.online.facebook.value" target="_blank"><img src="assets/icons/facebook-grey-icon.svg"></a>
          <a *ngIf="profile?.online.twitter.value" [href]="profile?.online.twitter.value" target="_blank"><img src="assets/icons/twitter-grey-icon.svg"></a>
          <a *ngIf="profile?.online.google.value" [href]="profile?.online.google.value" target="_blank"><img src="assets/icons/google-icon.svg"></a>
          <a *ngIf="profile?.online.linkedin.value" [href]="profile?.online.linkedin.value" target="_blank"><img src="assets/icons/linkedin-icon.svg"></a>
          <a *ngIf="profile?.online.youtube.value" [href]="profile?.online.youtube.value" target="_blank"><img src="assets/icons/youtube-icon.svg"></a>
        </span>
      </p>
    </div>
  </mat-card-content>
</mat-card>

<form>
  <mat-card class="demo-card demo-basic">
    <mat-toolbar color="primary" style="border-top-left-radius: 8px; border-top-right-radius: 8px;">
      <div style="flex: 1 1 auto; text-align: left;">Personal Details</div>
      <div style="display: flex; align-items: center; justify-content: space-around;">
        <button mat-icon-button matTooltip="Set all fields as private" [matTooltipPosition]="'below'"
                (click)="setGroupPrivacy('personal', false)">
          <mat-icon>lock</mat-icon>
        </button>
        <button mat-icon-button matTooltip="Save form" [matTooltipPosition]="'below'"
                (click)="submitForm()">
          <mat-icon>save</mat-icon>
        </button>
      </div>
    </mat-toolbar>
    <mat-card-content>
      <div style="width: 100%; max-width: 40em; margin: auto;">
        <mat-form-field style="width: 24%;">
          <mat-select placeholder="Title" [(value)]="profile?.personal.title.value">
            <mat-option value="Mr">Mr</mat-option>
            <mat-option value="Mrs">Mrs</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field style="width: 75%;">
          <input matInput placeholder="First Name">
          <rump-privacy-toggle-helper matSuffix
                                      [fieldName]="'personal.firstName'"
                                      [field]="profile?.personal.firstName"
                                      (privacyToggle)="togglePrivacy($event)">
          </rump-privacy-toggle-helper>
        </mat-form-field>
      </div>

      <div>
        <mat-form-field style="width: 100%; max-width: 40em;">
          <input matInput placeholder="Middle Name">
          <rump-privacy-toggle-helper matSuffix
                                      [fieldName]="'personal.middleName'"
                                      [field]="profile?.personal.middleName"
                                      (privacyToggle)="togglePrivacy($event)">
          </rump-privacy-toggle-helper>
        </mat-form-field>
      </div>

      <div>
        <mat-form-field style="width: 100%; max-width: 40em;">
          <input matInput placeholder="Last Name">
          <rump-privacy-toggle-helper matSuffix
                                      [fieldName]="'personal.lastName'"
                                      [field]="profile?.personal.lastName"
                                      (privacyToggle)="togglePrivacy($event)">
          </rump-privacy-toggle-helper>
        </mat-form-field>
      </div>

      <div style="margin: auto; width: 100%; max-width: 40em; text-align: left;">
        <mat-form-field style="width: 40%; max-width: 20em;">
          <mat-select placeholder="Gender" [(value)]="profile?.personal.gender.value">
            <mat-option value="male">Male</mat-option>
            <mat-option value="female">Female</mat-option>
          </mat-select>

          <rump-privacy-toggle-helper matSuffix
                                      [fieldName]="'personal.gender'"
                                      [field]="profile?.personal.gender"
                                      (privacyToggle)="togglePrivacy($event)">
          </rump-privacy-toggle-helper>
        </mat-form-field>
      </div>

      <div style="margin: auto; width: 100%; max-width: 40em;">
        <mat-form-field style="width: 49%;">
          <input matInput placeholder="Birthday" disabled
                 [matDatepicker]="birdthdayDatepicker"
                 [(value)]="profile?.personal.birthDate.value">
          <mat-datepicker-toggle matSuffix [for]="birdthdayDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #birdthdayDatepicker startView="year" disabled="false"></mat-datepicker>
          <rump-privacy-toggle-helper matSuffix
                                      [fieldName]="'personal.birthDate'"
                                      [field]="profile?.personal.birthDate"
                                      (privacyToggle)="togglePrivacy($event)">
          </rump-privacy-toggle-helper>
        </mat-form-field>

        <mat-form-field style="width: 50%;">
          <mat-select placeholder="Age Group" [(value)]="profile?.personal.ageGroup.value">
            <mat-option value="18-25">18 &ndash; 25</mat-option>
            <mat-option value="26-35">26 &ndash; 35</mat-option>
            <mat-option value="36-45">36 &ndash; 45</mat-option>
            <mat-option value="46-55">46 &ndash; 55</mat-option>
            <mat-option value="56-65">56 &ndash; 65</mat-option>
            <mat-option value="65-">65 +</mat-option>
          </mat-select>

          <rump-privacy-toggle-helper matSuffix
                                      [fieldName]="'personal.ageGroup'"
                                      [field]="profile?.personal.ageGroup"
                                      (privacyToggle)="togglePrivacy($event)">
          </rump-privacy-toggle-helper>
        </mat-form-field>
      </div>

      <div>
        <mat-form-field style="width: 100%; max-width: 40em;">
          <input matInput placeholder="Preferred Name" ([value])="profile?.personal.preferredName.value">
          <rump-privacy-toggle-helper matSuffix
                                      [fieldName]="'personal.preferredName'"
                                      [field]="profile?.personal.preferredName"
                                      (privacyToggle)="togglePrivacy($event)">
          </rump-privacy-toggle-helper>
        </mat-form-field>
      </div>

      <div>
        <mat-form-field style="width: 100%; max-width: 40em;">
          <input matInput placeholder="Nickname" ([value])="profile?.personal.nickName.value">
          <rump-privacy-toggle-helper matSuffix
                                      [fieldName]="'personal.nickName'"
                                      [field]="profile?.personal.nickName"
                                      (privacyToggle)="togglePrivacy($event)">
          </rump-privacy-toggle-helper>
        </mat-form-field>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card class="demo-card demo-basic">
    <mat-toolbar color="primary" style="border-top-left-radius: 8px; border-top-right-radius: 8px;">
      <div style="flex: 1 1 auto; text-align: left;">Online Profiles</div>
      <div style="display: flex; align-items: center; justify-content: space-around;">
        <button mat-icon-button matTooltip="Set all fields as private" [matTooltipPosition]="'below'"
                (click)="setGroupPrivacy('online', false)">
          <mat-icon>lock</mat-icon>
        </button>
        <button mat-icon-button matTooltip="Save form" [matTooltipPosition]="'below'"
                (click)="submitForm()">
          <mat-icon>save</mat-icon>
        </button>
      </div>
    </mat-toolbar>
    <mat-card-content>
      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Personal Website" ([value])="profile.online.website.value" [formControl]="websiteFormControl">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'online.website'"
                                    [field]="profile.online.website"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
        <mat-error *ngIf="websiteFormControl.hasError('pattern')">
          Looks like invalid URL was entered. Please follow format: https://example.com/
        </mat-error>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Blog" ([value])="profile.online.blog.value" [formControl]="blogFormControl">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'online.blog'"
                                    [field]="profile.online.blog"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
        <mat-error *ngIf="blogFormControl.hasError('pattern')">
          Looks like invalid URL was entered. Please follow format: https://example.com/
        </mat-error>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Facebook Profile" ([value])="profile.online.facebook.value" [formControl]="facebookFormControl">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'online.facebook'"
                                    [field]="profile.online.facebook"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
        <mat-error *ngIf="facebookFormControl.hasError('pattern')">
          Looks like invalid URL was entered. Please follow format: https://example.com/
        </mat-error>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Twitter Feed" ([value])="profile.online.twitter.value" [formControl]="twitterFormControl">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'online.twitter'"
                                    [field]="profile.online.twitter"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
        <mat-error *ngIf="twitterFormControl.hasError('pattern')">
          Looks like invalid URL was entered. Please follow format: https://example.com/
        </mat-error>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="LinkedIn Profile" ([value])="profile.online.linkedin.value" [formControl]="linkedinFormControl">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'online.linkedin'"
                                    [field]="profile.online.linkedin"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
        <mat-error *ngIf="linkedinFormControl.hasError('pattern')">
          Looks like invalid URL was entered. Please follow format: https://example.com/
        </mat-error>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input type="tel" matInput placeholder="Google+ Profile" ([value])="profile.online.google.value" [formControl]="googlePlusFormControl">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'online.google'"
                                    [field]="profile.online.google"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
        <mat-error *ngIf="googlePlusFormControl.hasError('pattern')">
          Looks like invalid URL was entered. Please follow format: https://example.com/
        </mat-error>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input type="tel" matInput placeholder="YouTube Channel" ([value])="profile.online.youtube.value" [formControl]="youtubeFormControl">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'online.youtube'"
                                    [field]="profile.online.youtube"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
        <mat-error *ngIf="youtubeFormControl.hasError('pattern')">
          Looks like invalid URL was entered. Please follow format: https://example.com/
        </mat-error>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <mat-card class="demo-card demo-basic">
    <mat-toolbar color="primary" style="border-top-left-radius: 8px; border-top-right-radius: 8px;">
      <div style="flex: 1 1 auto; text-align: left;">Contact Details</div>
      <div style="display: flex; align-items: center; justify-content: space-around;">
        <button mat-icon-button matTooltip="Set all fields as private" [matTooltipPosition]="'below'"
                (click)="setGroupPrivacy('contact', false)">
          <mat-icon>lock</mat-icon>
        </button>
        <button mat-icon-button matTooltip="Save form" [matTooltipPosition]="'below'"
                (click)="submitForm()">
          <mat-icon>save</mat-icon>
        </button>
      </div>
    </mat-toolbar>
    <mat-card-content>
      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Primary Email" ([value])="profile.contact.primaryEmail.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'contact.primaryEmail'"
                                    [field]="profile.contact.primaryEmail"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Alternative Email" ([value])="profile.contact.alternativeEmail.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'contact.alternativeEmail'"
                                    [field]="profile.contact.alternativeEmail"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input type="tel" matInput placeholder="Mobile" ([value])="profile.contact.mobile.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'contact.mobile'"
                                    [field]="profile.contact.mobile"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input type="tel" matInput placeholder="Home Number" ([value])="profile.contact.landline.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'contact.landline'"
                                    [field]="profile.contact.landline"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <mat-card class="demo-card demo-basic">
    <mat-toolbar color="primary" style="border-top-left-radius: 8px; border-top-right-radius: 8px;">
      <div style="flex: 1 1 auto; text-align: left;">Emergency Contact</div>
      <div style="display: flex; align-items: center; justify-content: space-around;">
        <button mat-icon-button matTooltip="Set all fields as private" [matTooltipPosition]="'below'"
                (click)="setGroupPrivacy('emergencyContact', false)">
          <mat-icon>lock</mat-icon>
        </button>
        <button mat-icon-button matTooltip="Save form" [matTooltipPosition]="'below'"
                (click)="submitForm()">
          <mat-icon>save</mat-icon>
        </button>
      </div>
    </mat-toolbar>
    <mat-card-content>
      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="First Name" ([value])="profile.emergencyContact.firstName.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'emergencyContact.firstName'"
                                    [field]="profile.emergencyContact.firstName"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Last Name" ([value])="profile.emergencyContact.lastName.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'emergencyContact.lastName'"
                                    [field]="profile.emergencyContact.lastName"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input type="tel" matInput placeholder="Mobile" ([value])="profile.emergencyContact.mobile.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'emergencyContact.mobile'"
                                    [field]="profile.emergencyContact.mobile"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input type="tel" matInput placeholder="Relationship" ([value])="profile.emergencyContact.relationship.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'emergencyContact.relationship'"
                                    [field]="profile.emergencyContact.relationship"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <mat-card class="demo-card demo-basic">
    <mat-toolbar color="primary" style="border-top-left-radius: 8px; border-top-right-radius: 8px;">
      <div style="flex: 1 1 auto; text-align: left;">Home Address</div>
      <div style="display: flex; align-items: center; justify-content: space-around;">
        <button mat-icon-button matTooltip="Set all fields as private" [matTooltipPosition]="'below'"
                (click)="setGroupPrivacy('address', false)">
          <mat-icon>lock</mat-icon>
        </button>
        <button mat-icon-button matTooltip="Save form" [matTooltipPosition]="'below'"
                (click)="submitForm()">
          <mat-icon>save</mat-icon>
        </button>
      </div>
    </mat-toolbar>
    <mat-card-content>
      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Address Line 1" ([value])="profile.address.addressLine1.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'address.addressLine1'"
                                    [field]="profile.address.addressLine1"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Address Line 2" ([value])="profile.address.addressLine2.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'address.addressLine2'"
                                    [field]="profile.address.addressLine2"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="City" ([value])="profile.address.city.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'address.city'"
                                    [field]="profile.address.city"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Postcode" ([value])="profile.address.postcode.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'address.postcode'"
                                    [field]="profile.address.postcode"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="County" ([value])="profile.address.county.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'address.county'"
                                    [field]="profile.address.county"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Country" ([value])="profile.address.country.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'address.country'"
                                    [field]="profile.address.country"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>
    </mat-card-content>
  </mat-card>

  <mat-card class="demo-card demo-basic">
    <mat-toolbar color="primary" style="border-top-left-radius: 8px; border-top-right-radius: 8px;">
      <div style="flex: 1 1 auto; text-align: left;">About</div>
      <div style="display: flex; align-items: center; justify-content: space-around;">
        <button mat-icon-button matTooltip="Set all fields as private" [matTooltipPosition]="'below'"
                (click)="setGroupPrivacy('about', false)">
          <mat-icon>lock</mat-icon>
        </button>
        <button mat-icon-button matTooltip="Save form" [matTooltipPosition]="'below'"
                (click)="submitForm()">
          <mat-icon>save</mat-icon>
        </button>
      </div>
    </mat-toolbar>
    <mat-card-content>
      <mat-form-field style="width: 100%; max-width: 40em;">
        <input matInput placeholder="Title" ([value])="profile.about.title.value">
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'about.title'"
                                    [field]="profile.about.title"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>

      <mat-form-field style="width: 100%; max-width: 40em;">
        <textarea matInput matTextareaAutosize
                  [matAutosizeMinRows]="4"
                  placeholder="Say something nice about yourself for the world to see"
                  ([value])="profile.about.body.value"></textarea>
        <rump-privacy-toggle-helper matSuffix
                                    [fieldName]="'about.body'"
                                    [field]="profile.about.body"
                                    (privacyToggle)="togglePrivacy($event)">
        </rump-privacy-toggle-helper>
      </mat-form-field>
    </mat-card-content>
  </mat-card>
</form>
