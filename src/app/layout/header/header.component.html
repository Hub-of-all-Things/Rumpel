<!--
  ~ Copyright (C) 2016 HAT Data Exchange Ltd - All Rights Reserved
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  ~ Written by Augustinas Markevicius <augustinas.markevicius@hatdex.org> 2016
  -->

<div class="navbar smaller">
  <div class="container-fluid">

    <!--

    <div class="navbar-header" *ngIf="userAuthenticated">
        <div class="wrapper notif" id="intro-step2">
          <button (click)="showNotificationsCentre()" type="button">
            <span class="ss-notice"></span>
            Notifications
            <span class="new-notifications" *ngIf="unreadNotifications > 0">{{unreadNotifications}}</span>
          </button>
        </div>
    </div>

  -->

    <div class="navbar-collapse" id="navbar-main">
      <ul class="nav navbar-nav navbar-right">

        <!--
        <li *ngIf="!!hatDomain" class="user-nav" style="text-transform: lowercase;">
          <a [routerLink]="['public', 'profile']">{{hatDomain}}</a>
        </li>
        <li *ngIf="!!hatDomain" (click)="signOut()" class="user-nav" style="cursor: pointer;"><p>Sign Out</p></li>
        <li *ngIf="!hatDomain" [routerLink]="['user', 'login']" class="user-nav" style="cursor: pointer;"><a>Sign In</a></li>
        <li *ngIf="!!hatDomain" class="user-nav hidden-xs"><p style="cursor: pointer;" (click)="startIntro()">New to Rumpel</p></li>
        <li class="user-nav hidden-xs hidden-sm"><a [href]="marketSquareLink" target="_blank" style="cursor: pointer;">MarketSquare</a></li>
        <li class="user-nav hidden-xs" style="cursor: pointer;" (click)="showInfoModal()"><p>Who Can See This?</p></li>
      -->

      <li class="user-nav help"><a (click)="showInfoModal()"><i class="material-icons">help_outline</i><span>Help</span></a></li>

      <li class="user-nav account" *ngIf="userAuthenticated">
        <div class="user-photo" (click)="showNotificationsCentre()" id="intro-step2">
          <img [src]="profile.photo.url ? profile.photo.url : '/assets/icons/user-account-icon.svg'">
          <span class="badge notif-badge" *ngIf="unreadNotifications">{{unreadNotifications}}</span>
        </div>


        <div class="account-actions">
          <div class="btn-group">
            <button class="btn btn-secondary btn-lg dropdown-toggle account-btn" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <h6 class="welcome">Welcome {{profile.first_name}}<br><span>Last login: {{accountStatus?.previousLogin}}</span></h6>
              <div class="account-options"><i class="material-icons">keyboard_arrow_down</i></div>
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item" [routerLink]="['/user', 'password', 'change']">Change password</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" (click)="signOut()">Sign out</a>
            </div>
          </div>

        </div>
      </li>

      <li class="user-nav account" *ngIf="!userAuthenticated">
        <div class="user-photo">
          <img [src]="'/assets/icons/user-account-icon.svg'">
        </div>


        <div class="account-actions">
          <div class="btn-group">
            <button class="btn btn-secondary btn-lg dropdown-toggle account-btn" type="button" [routerLink]="['/user', 'login']">
              <h6>Sign in</h6>
            </button>
          </div>

        </div>
      </li>

      </ul>
    </div>
  </div>
</div>
