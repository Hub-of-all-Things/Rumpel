<!--
  ~ Copyright (C) 2017 - 2019 DataSwift Ltd - All Rights Reserved
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  ~ Written by Augustinas Markevicius <augustinas.markevicius@dataswift.io> 4, 2017
  -->

<ng-container *ngIf="headerProps$ | async as props">
  <rum-graphic-page-header title="HAT {{props.title}}"
                           headline="{{props.headline}}"
                           matIcon="{{props.icon}}">
  </rum-graphic-page-header>
</ng-container>

<div class="app-list">
  <ng-container *ngFor="let app of hatApp$ | async">
    <mat-card *ngIf="app.application.info.graphics.logo.normal">
      <a [routerLink]="app.application.id" class="app-link-wrapper">
        <mat-card-content>
          <img [src]="app.application.info.graphics.logo.normal" class="img img-responsive app-logo" height="60" width="60" />
          <div class="app-description">
            <h3 class="app-name">{{ app.application.info.name }}</h3>
            <div class="app-headline">{{ app.application.info.headline }}</div>
          </div>
          <div class="app-link-action">View app</div>


          <mat-icon [ngClass]="['app-status-icon', applicationStatus(app)]"
                    [class.error]="app.setup && !app.active && app.mostRecentData">
            {{ statusIcon(app) }}
          </mat-icon>
        </mat-card-content>
      </a>
    </mat-card>
  </ng-container>
</div>
