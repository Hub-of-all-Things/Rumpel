<!--
  ~ Copyright (C) 2016 HAT Data Exchange Ltd - All Rights Reserved
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  ~ Written by Augustinas Markevicius <augustinas.markevicius@hatdex.org> 2016
  -->


<div class="activitylist-container" [style.height]="componentHeight">

  <h6 class="todayHeader">Today</h6>

  <div class="date" *ngFor="let day of eventList; let i = index;">

      <div class="date-box" [class.today]="day.selected" (click)="scrollToItem(i)">

                    <h2>{{day.timestamp.format('D')}}<span>{{day.timestamp.format('MMM')}}</span><span>{{day.timestamp.format('YYYY')}}</span></h2>

                    <div>
                          <div *ngFor="let activity of day.activities">
                            <div class="activity">

                                <div *ngIf="activity.type === 'notable'" class="activity-item notable-item">
                                    <rump-location-notable [notable]="activity.event"></rump-location-notable>
                                    <i class="material-icons">border_color</i>
                                </div>


                                <div *ngIf="activity.type === 'event'" class="activity-item event">
                                    <div>
                                      <h4>{{activity.event.title}}</h4>
                                      <p class="event-description" *ngIf="activity.event.description">{{activity.event.description | limitContent:140}}</p>
                                      <p>{{activity.event.start | moment:'hh:mm A'}} - {{activity.event.end | moment:'hh:mm A'}}</p>
                                    </div>

                                    <img *ngIf="activity.event.calendarName == 'google'" src="assets/icons/google-calendar-plug.svg">
                                    <img *ngIf="activity.event.calendarName == 'facebook'" src="assets/icons/facebook-f-icon.svg">
                                    <img *ngIf="activity.event.calendarName != 'google' && activity.event.calendarName != 'facebook'" src="assets/icons/calendar-plug.png">
                                </div>

                                <div *ngIf="activity.type === 'photo'" class="activity-item photo-box" [style.background-image]="'url('+activity.event.src + ')'">
                                    <div class="photo-description" >
                                      <h4>{{activity.event.name}}</h4>
                                      <p>{{activity.event.timestamp | moment}}</p>
                                    </div>
                                    <img class="icon-rounded" src="assets/icons/photos-plug.svg">
                                </div>


                                <div *ngIf="activity.type === 'facebook' && activity.event.type !=='photo' && activity.event.type !=='link'" class="activity-item post">
                                      <rump-location-fb-post [post]="activity.event"></rump-location-fb-post>
                                      <img src="assets/icons/facebook-f-icon.svg">
                                </div>

                                <div *ngIf="activity.type === 'facebook' && activity.event.type ==='photo' || activity.event.type ==='link'" class="activity-item post photo-box" [style.background-image]="'url('+activity.event.content.fullPicture + ')'">
                                      <rump-location-fb-post [post]="activity.event"></rump-location-fb-post>
                                      <img src="assets/icons/facebook-f-icon.svg">
                                </div>



                                <div *ngIf="activity.type === 'twitter'" class="activity-item post">
                                      <rump-location-tweet [tweet]="activity.event"></rump-location-tweet>
                                      <img src="assets/icons/twitter-icon.svg">
                                </div>

                                <div *ngIf="activity.type === 'location'" class="activity-item location">
                                      <div>
                                        <h4>Multiple locations</h4>
                                        <p>Click to update the map</p>
                                      </div>
                                      <img src="assets/icons/location-icon.svg">
                                </div>

                              </div>
                        </div>
                    </div>
          </div>
    </div>
</div>



<div class="backToTop">
  <i class="material-icons" (click)="scrollToItem(0)" data-toggle="popover" data-container=".backToTop" data-trigger="hover" data-placement="top" data-content="Back to today's date">expand_less</i>
</div>





<!--

  <div *ngIf="notables.length > 0">
    <h3 class="category-title">Notables</h3>
    <div *ngFor="let notable of notables" class="notable-item">
      <rump-notable [notable]="notable" [modifiable]="false"></rump-notable>
    </div>
  </div>

  <div *ngIf="events.length > 0">
    <h3 class="category-title">Events</h3>
    <div *ngFor="let event of events" class="event">
      <div class="row vertical-align">
        <div class="col-xs-2 event-time">
          <p>{{event.start | moment:'hh:mm A'}}</p>
          <span class="ss-down"></span>
          <p>{{event.end | moment:'hh:mm A'}}</p>
        </div>

        <div class="col-xs-10">
          <h4>{{event.name}}</h4>
          <p class="event-description" *ngIf="event.description">{{event.description | limitContent:140}}</p>
          <p>From: {{event.calendarName}}</p>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="photos.length > 0">
    <h3 class="category-title">Photos taken</h3>
    <div class="photos">
      <div *ngFor="let photo of photos" class="photo-box">
        <h5>{{photo.name}}</h5>
        <img [src]="photo.src" class="img img-responsive">
        <div class="photo-description">
          <div><span class="ss-folder ss-glyphish-filled"></span>{{photo.displayPath}}</div>
          <div><span class="ss-clock ss-glyphish-filled"></span>{{photo.timestamp | moment}}</div>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="posts.length > 0">
    <h3 class="category-title">Social media posts</h3>
    <div *ngFor="let post of posts" class="post">
      <rump-fb-post [post]="post"></rump-fb-post>
    </div>
  </div>
</div>

-->
