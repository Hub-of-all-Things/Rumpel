<!--
  ~ Copyright (C) 2019 HAT Data Exchange Ltd - All Rights Reserved
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  ~ Written by Terry Lee <terry.lee@hatdex.org> 2, 2019
  -->

<div class="native-login-page">
  <span class="small-flex-spacer"></span>

  <div [style.visibility]="errorType ? 'visible' : 'hidden'" class="rum-error-message">
    <mat-icon class="rum-error-message-icon">warning</mat-icon>
    {{errorText()}}
  </div>

  <div class="title-container">
    <div class="heading-wrapper">
      <h2 class="title">Choose your password</h2>
      <div class="title-hat-domain-wrapper">
        <div class="hat-name">
          <h3 class="title-hat-domain">{{ hatName }}</h3>
        </div>
        <div class="hat-domain">
          <h3 class="title-hat-domain">.{{ hatDomain }}</h3>
        </div>
      </div>
    </div>
  </div>

  <div class="f-g">
    <div class="password-guidance-box password-description">
      Your data is precious - keep it safe with a password that is Strong or Very Strong.
    </div>
  </div>

  <div class="f-g">
    <label for="newPass" hidden>Please enter new HAT password</label>
    <input id="newPass" type="password" class="hat-pass-input" name="hat-pass-input"
           [class.rum-field-has-error]="errorType === 'passwordStrengthError'"
           placeholder="Enter new HAT password" #newPass
           (focus)="clearErrors()"
           (keyup)="analysePassword(newPass.value)" />
  </div>

  <div class="f-g">
    <label for="newPassConfirm" hidden>Please confirm new HAT password</label>
    <input id="newPassConfirm" type="password" class="hat-pass-input" name="hat-pass-input"
           [class.rum-field-has-error]="errorType === 'passwordMatchError'"
           placeholder="Confirm new password" #newPassConfirm
           (focus)="clearErrors()"
           (keyup)="updatePassword(newPass.value, newPassConfirm.value)"/>

    <div class="password-strength-indicator" *ngIf="passwordStrength">
      <div class="indicator-bar" *ngFor="let barId of [0, 1, 2, 3, 4]"
           [style.background-color]="barId > passwordStrength.score ? '#bebebe' : colorMapping[passwordStrength.score]"></div>
      <div style="color: #9a9a9a;">
        Password strength: <span [style.color]="colorMapping[passwordStrength.score]">
            {{evaluationMapping[passwordStrength.score]}}</span>
      </div>
    </div>
    <div class="password-guidance-box">
      A combination of three random words is one of the strongest passwords, and the kind we recommend.
      Read on how we determine password strength policy (and why itâ€™s so important) on our
      <a href="https://developers.hubofallthings.com/home/hat_service_provider/security_requirement_best_practice.html" target="_blank">developer's portal</a>.
    </div>
  </div>

  <span class="large-flex-spacer"></span>
</div>
