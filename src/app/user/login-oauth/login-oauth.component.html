<!--
  ~ Copyright (C) 2017 HAT Data Exchange Ltd - All Rights Reserved
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  ~ Written by Augustinas Markevicius <augustinas.markevicius@hatdex.org> 4, 2017
  -->

<ng-container *ngIf="hatApp || errorMessage else loading">
  <ng-container *ngIf="hatApp">
    <rum-hat-application-permissions [app]="hatApp"></rum-hat-application-permissions>

    <div class="user-actions">
      <button mat-flat-button role="button" (click)="agreeTerms(hatApp.id)">Agree</button>
      <button mat-flat-button role="link" (click)="declineTerms()">Cancel</button>
    </div>
  </ng-container>

  <ng-container *ngIf="errorMessage">
    <div class="app-error">
      <h3 class="app-error-header">Ooops... Looks like something went wrong.</h3>
      <p class="app-error-text">{{errorMessage}}</p>
    </div>
  </ng-container>

</ng-container>

<ng-template #loading>
  <div class="loading">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading permissions</div>
  </div>
</ng-template>
