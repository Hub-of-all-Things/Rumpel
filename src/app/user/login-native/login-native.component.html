<!--
  ~ Copyright (C) 2016 - 2019 DataSwift Ltd - All Rights Reserved
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  ~ Written by Augustinas Markevicius <augustinas.markevicius@dataswift.io> 2016
  -->

<rum-info-header>
  <span class="header-item">What can I do with my HAT?</span>
  <a mat-button href="https://hubofallthings.com" target="_blank" class="header-item header-link">Learn more</a>
</rum-info-header>

<div class="native-login-page">

  <ng-container *ngIf="passwordError === true">
    <div class="rum-error-message">
      <mat-icon class="rum-error-message-icon">warning</mat-icon>
      Sorry, that password is incorrect!
    </div>
  </ng-container>

  <ng-container *ngIf="accountExists === true">
    <div class="rum-hat-already-exists">
      Our records show that the email you entered is already used for a HAT with the URL below. Please enter your password to log in.
    </div>
  </ng-container>

  <span class="small-flex-spacer"></span>

  <span class="small-flex-spacer"></span>

  <div class="issuer-logo">
    <img src="/assets/images/hatdex-logo.png" height="24.5" width="140" />
  </div>

  <hr class="login-vertical-divider"/>

  <div class="title-container">
    <button mat-icon-button class="back-button">
      <mat-icon (click)="goBack()">arrow_back</mat-icon>
    </button>

    <div class="heading-wrapper">
      <div class="title-hat-domain-wrapper">
        <div class="hat-name">
          <h3 class="hat-domain-rumpel-bold">{{ hatName }}</h3>
        </div>

        <div class="hat-domain">
          <h3 class="hat-domain-rumpel-bold">{{ hatDomain }}</h3>
        </div>
      </div>
    </div>
  </div>

  <div class="f-g">
    <form>
      <div class="input-password-container">
        <label for="hatPass" hidden></label>

        <input matInput id="hatPass" type="password" class="hat-rumpel-input" name="hat-pass-input"
               [class.rum-error-field]="passwordError"
               placeholder="Password" #hatPass
               autocomplete="password"
               (focus)="hideErrorMessage()"
               (keyup.enter)="login(hatPass)"
               [type]="hide ? 'password' : 'text'">
        <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
      </div>
    </form>
  </div>

  <div class="remember-me-container">
    <mat-checkbox class="remember-me-checkbox" [(ngModel)]="rememberMe" color="primary">Remember me</mat-checkbox>
  </div>

  <span class="small-flex-spacer"></span>

  <div class="logo-wrapper">
    <img src="/assets/images/HATDataRights_200.png" height="48" width="48" alt="HAT Data rights logo" />
  </div>

  <div class="data-rights-description">
    <p>
      Data rights protection ensures your HAT is always secure and that the rights to your data are preserved. Your password will not be shared with the application.
    </p>
  </div>

  <div class="user-actions">
    <button mat-flat-button role="button" class="btn-rumpel btn-rumpel-enabled" (click)="login(hatPass)">Log in</button>
    <a role="link" [routerLink]="['/user', 'password', 'recover']">Forgotten password?</a>
  </div>

  <span class="large-flex-spacer"></span>
</div>
