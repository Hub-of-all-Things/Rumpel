<!--
  ~ Copyright (C) 2019 DataSwift Ltd - All Rights Reserved
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  ~ Written by Eleftherios Myteletsis <eleftherios.myteletsis@dataswift.io> 3, 2019
  -->

<div class="app-details-header">
  <span class="flex-spacer"></span>
  <mat-card class="app-details-header-card">
    <div class="app-logo-wrapper">
      <svg *ngIf="!values?.photo.avatar" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           width="100px" height="100px" viewBox="2 2 20 20" enable-background="new 2 2 20 20" xml:space="preserve">
        <path d="M12,2C6.48,2,2,6.48,2,12c0,5.52,4.48,10,10,10c5.52,0,10-4.48,10-10C22,6.48,17.52,2,12,2z M12,5c1.66,0,3,1.34,3,3s-1.34,3-3,3S9,9.66,9,8S10.34,5,12,5z M12,19.2c-2.5,0-4.71-1.28-6-3.22c0.03-1.99,4-3.08,6-3.08c1.99,0,5.971,1.09,6,3.08C16.71,17.92,14.5,19.2,12,19.2z"
              fill="#CCCCCC" />
        <path fill="none" d="M0,0h24v24H0V0z" />
      </svg>

      <img *ngIf="values?.photo.avatar" src="{{values.photo.avatar | presignImgUrl | async}}"
           height="100"
           class="img img-responsive app-logo">
    </div>
    <h3 class="app-details-header-title">{{hatDomain.split('.')[0]}}</h3>
    <div class="app-details-header-headline">{{hatDomain.slice(hatDomain.indexOf('.'))}}</div>

    <ng-container *ngIf="systemStatus$ | async as systemStatus">
      <ng-container *ngIf="dataBaseUsedPercent">
      <mat-progress-bar mode="determinate" value="{{ dataBaseUsedPercent.kind.metric }}"></mat-progress-bar>

      <div class="app-details-header-headline">{{ dataBaseUsedPercent.kind.metric >= 100 ? 100 : dataBaseUsedPercent.kind.metric }}% of {{ dataBaseStorage.kind.metric }}{{ dataBaseStorage.kind.units }} storage used</div>
      </ng-container>
    </ng-container>

  </mat-card>
</div>
