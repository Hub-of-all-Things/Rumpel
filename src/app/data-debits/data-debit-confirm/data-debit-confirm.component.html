<!--
  ~ Copyright (C) 2016 HAT Data Exchange Ltd - All Rights Reserved
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at http://mozilla.org/MPL/2.0/.
  ~ Written by Augustinas Markevicius <augustinas.markevicius@hatdex.org>
  -->

<div class="row" *ngIf="offer">
  <div class="col-xs-10 col-xs-offset-1">
    <div class="offer">
      <div class="offer-title">

        <h2>{{offer.title}}</h2>
        <h4>{{ offer.status }}</h4>
        <p class="text-center offer-description">{{offer.description}}</p>
        <p>Available<span>{{offer.starts | moment:'ddd DD MMM YYYY, h:mm a'}} - {{offer.expires | moment:'ddd DD MMM YYYY, h:mm a'}}</span></p>
        <p>You signed up<span>{{offer.created | moment:'ddd DD MMM YYYY, h:mm a'}}</span></p>

        <!-- needs testing
        <a *ngIf="dataDebit" (click)="toggleEnabled(!dataDebit.enabled)" class="enableBtn">
          <span *ngIf="!dataDebit.enabled">Enable</span>
          <span *ngIf="dataDebit.enabled">Enable</span>
        </a>
        -->


        <div class="share-buttons text-center">
          <h3 class="share-text">Share</h3>
          <a [href]="facebookShareLink" role="button" class="btn btn-third-party btn-facebook" target="_blank">
            <span class="icon"><img src="/assets/icons/facebook-icon.png" alt="facebook share"></span>
            Facebook
          </a>

          <a [href]="twitterShareLink" role="button" class="btn btn-third-party btn-twitter" target="_blank">
            <span class="icon"><img src="/assets/icons/twitter-icon.png" alt="twitter share"></span>
            Tweet
          </a>
        </div>

      </div>
    </div>
  </div>
</div>

<!--
<div class="row offer-dialog">
  <div class="text-center" [ngSwitch]="status">
    <div class="message" *ngIf="confirmMessage" style="margin-bottom: 1.5em;">
      Confirmation: You have accepted the data offer and a data debit has been created on your HAT. You can manage all your HAT data exchanges at the data debit section of Rumpel.
    </div>
    <div *ngSwitchCase="'pending'">
      <div class="message">
        <span class="icon-alert ss-alert ss-glyphish-filled"></span>
        Last chance to review the data being released before accepting offer.
      </div>
      <div class="offer-dialog">
        <button class="btn btn-rump btn-accept"
                (click)="acceptDataDebit()">Accept Offer</button>
        <button class="btn btn-rump"
                (click)="rejectDataDebit()">Cancel</button>
      </div>
    </div>
    <div class="message" *ngSwitchCase="'accepted'">
      <span class="icon-alert accepted ss-info ss-glyphish-filled"></span>
      This data debit has already been confirmed. The information that was transferred can be reviewed below.
    </div>
    <div *ngSwitchCase="'satisfied'">
      <!--<button class="btn btn-rump"-->
              <!--(click)="navigateToRewardClaim()">Collect your reward</button>-->

<!--
      <div class="message">
        <span class="icon-alert accepted ss-currency ss-glyphish-filled"></span>
        Enough people have claimed the offer to collect the reward!
      </div>
    </div>
    <div *ngSwitchCase="'paid'">
    </div>
    <div *ngSwitchDefault>
      <div class="message">Loading... Please wait.</div>
    </div>
  </div>
</div>

<div class="row" *ngIf="dataDebit">
  <div class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-10 col-xs-offset-1 debit-review">
    <div class="panel panel-rump" *ngFor="let source of dataDebit.dataToShare">
      <div class="panel-heading">{{source.name.charAt(0).toUpperCase() + source.name.slice(1)}}</div>
      <div class="panel-body">
        <section *ngFor="let table of source.data">
          <h4>{{table.name.charAt(0).toUpperCase() + table.name.slice(1)}}</h4>

          <rump-tree-view [treeNodes]="table.data[0] | withObject"
                     [offset]="0"></rump-tree-view>
        </section>
      </div>
    </div>
  </div>
</div>

-->

 <!--  <div class="col-md-6 offer-terms">
    <div class="panel panel-rump">
      <div class="panel-heading">Terms of Offer</div>
      <div class="panel-body">
        <h3>{{offerInfo.offer.title}}</h3>
        <h5>Contact Information</h5>
        <p>{{offerInfo.owner.firstName + ' ' + offerInfo.owner.lastName}}</p>
        <p>E-mail: {{offerInfo.owner.email}}</p>
        <h5>Validity</h5>
        <p>The offer is running from {{offerInfo.offer.starts | moment:'Do MMM, YYYY'}} to {{offerInfo.offer.expires | moment:'Do MMM, YYYY'}}.</p>
        <h5>Data sources required for the offer</h5>
        <ul>
          <li *ngFor="let set of offerInfo.offer.dataRequest.definition">{{set.source}}</li>
        </ul>
      </div>
    </div>
  </div> -->
